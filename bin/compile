#!/bin/sh

BUILD_DIR=$1

echo "-----> Installing Ollama..."

# Download and install Ollama binary
rm -rf "$BUILD_DIR/.heroku/ollama"
mkdir -p $BUILD_DIR/.heroku/ollama
cd "$BUILD_DIR/.heroku/ollama"
curl -L https://ollama.ai/download/ollama-linux-amd64

# Add binary to PATH
mkdir -p "$BUILD_DIR/.profile.d"
echo 'export PATH="$PATH:$HOME/.heroku/ollama/"' >> $BUILD_DIR/.profile.d/ollama.sh
chmod +x "$BUILD_DIR/.profile.d/ollama.sh"

"$BUILD_DIR/.heroku/ollama" -v
echo "-----> Ollama installation done"
